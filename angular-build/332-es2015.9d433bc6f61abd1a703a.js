"use strict";(self.webpackChunkmultikart_backend=self.webpackChunkmultikart_backend||[]).push([[332],{31332:function(e,t,s){s.r(t),s.d(t,{CustomerModule:function(){return M}});var i=s(38583),r=s(90665),o=s(22744),a=s(15834),n=s(61861),l=s(70429),d=s(10494),m=s(98616),u=s(93291),c=s(5383),f=s(37716),p=s(20985),g=s(71279),v=s(75288),h=s(36711);function Z(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1," Username is required "),f.qZA())}function q(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,Z,2,0,"div",23),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",e.f.username.errors.required)}}function A(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1," Password is required "),f.qZA())}function x(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,A,2,0,"div",23),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.Q6J("ngIf",e.f.password.errors.required)}}const U=function(e){return{"is-invalid":e}};function T(e,t){if(1&e&&(f.TgZ(0,"div",8),f.TgZ(1,"label",9),f.TgZ(2,"span"),f._uU(3,"*"),f.qZA(),f._uU(4," Password"),f.qZA(),f._UZ(5,"input",24),f.YNc(6,x,2,1,"div",11),f.qZA()),2&e){const e=f.oxw();f.xp6(5),f.Q6J("ngClass",f.VKq(2,U,e.submitted&&e.f.password.errors)),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.password.errors)}}function b(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1," FirstName is required "),f.qZA())}function N(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,b,2,0,"div",23),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",e.f.firstName.errors.required)}}function C(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1," LastName is required "),f.qZA())}function w(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,C,2,0,"div",23),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",e.f.lastName.errors.required)}}function J(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Email is required"),f.qZA())}function I(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Wrong type email"),f.qZA())}function _(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,J,2,0,"div",23),f.YNc(2,I,2,0,"div",23),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",e.f.email.errors.required),f.xp6(1),f.Q6J("ngIf",e.f.email.errors.email)}}function y(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1," Address is required "),f.qZA())}function S(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,y,2,0,"div",23),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",e.f.address.errors.required)}}function Q(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Phone is required"),f.qZA())}function F(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,Q,2,0,"div",23),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",e.f.phone.errors.required)}}function Y(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1," Image is required "),f.qZA())}function R(e,t){if(1&e&&(f.TgZ(0,"div",22),f.YNc(1,Y,2,0,"div",23),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",e.f.imageUrl.errors.required)}}let L=(()=>{class e{constructor(e,t,s,i){this.formBuilder=e,this.customerService=t,this.ngbActiveModal=s,this.messageService=i,this.submitted=!1,this.modalFile=new c.mH,this.modalFile.typeFile=c.U9.IMAGE,this.modalFile.multiBoolen=!1,this.modalFile.enityType=c.py.USER}ngOnInit(){this.loadItem(),this.item&&(this.fileURL=[],this.fileURL.push(this.item.imageUrl))}loadItem(){this.usersForm=this.formBuilder.group({username:[this.item?this.item.username:"",[r.kI.required]],password:[this.item?this.item.password:"",[r.kI.required]],email:[this.item?this.item.email:"",[r.kI.required,r.kI.email]],firstName:[this.item?this.item.firstName:"",[r.kI.required]],lastName:[this.item?this.item.lastName:"",[r.kI.required]],imageUrl:[this.item?this.item.imageUrl:""],address:[this.item?this.item.address:""],phone:[this.item?this.item.phone:""]}),this.modalHeader=new c.IQ,this.modalHeader.title=this.item?`Update ${this.item.username}`:"Add",this.modalFooter=new c.Jt,this.modalFooter.title="Save"}get f(){return this.usersForm.controls}save(){this.submitted=!0,!this.usersForm.invalid&&(this.user={username:this.usersForm.value.username,password:this.usersForm.value.password,email:this.usersForm.value.email,firstName:this.usersForm.value.firstName,lastName:this.usersForm.value.lastName,imageUrl:this.usersForm.value.imageUrl,id:this.item?this.item.id:"",files:this.modalFile.listFile,address:this.usersForm.value.address,phone:this.usersForm.value.phone},this.callServiceToSave())}callServiceToSave(){this.customerService.save(this.user).then(()=>{this.messageService.notification(this.item?"Profile has been updated":"Profile has been created",m.b.SUCCESS),this.ngbActiveModal.close()}).catch(e=>{var t,s;this.messageService.alert(null!==(s=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==s?s:"Server Disconnected",m.b.ERROR)})}close(e){this.ngbActiveModal.dismiss()}onChangeData(e){null!=e&&(this.fileURL||(this.fileURL=[]),e.add&&(this.fileURL=[...this.fileURL,...e.add]),e.remove&&this.fileURL.forEach((t,s)=>{t.includes(e.remove)&&this.fileURL.splice(s,1)}),e.removeAll&&(this.fileURL=[]),this.usersForm.controls.imageUrl.setValue(this.fileURL.join(",")))}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(r.qu),f.Y36(u.vZ),f.Y36(a.Kz),f.Y36(p.e))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-customer-details"]],inputs:{item:"item"},features:[f._Bn([u.vZ])],decls:57,vars:34,consts:[[3,"data","onAction"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card","tab2-card"],[1,"card-body"],["id","account","role","tabpanel","aria-labelledby","account-tab",1,"tab-pane","fade","active","show"],["novalidate","",1,"needs-validation","user-add",3,"formGroup"],[1,"form-group","row"],["for","validationCustom0",1,"col-xl-3","col-md-4"],["type","text","formControlName","username","autocomplete","username",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["class","invalid-feedback col-md-5 offset-md-3",4,"ngIf"],["class","form-group row",4,"ngIf"],["for","validationCustom2",1,"col-xl-3","col-md-4"],["type","text","formControlName","firstName",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["type","text","formControlName","email",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["type","text","formControlName","address",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["type","text","formControlName","phone",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["type","text","formControlName","imageUrl","hidden","",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"col-xl-8","col-md-7","p-0"],["styleFile","width: 100%; height: auto;",3,"data","fileURL","onChange"],[1,"invalid-feedback","col-md-5","offset-md-3"],[4,"ngIf"],["type","password","formControlName","password","autocomplete","new-password",1,"form-control","col-xl-8","col-md-7",3,"ngClass"]],template:function(e,t){1&e&&(f.TgZ(0,"app-modal-header",0),f.NdJ("onAction",function(e){return t.close(e)}),f.qZA(),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"div",6),f.TgZ(7,"form",7),f.TgZ(8,"h4"),f._uU(9,"Customer Details"),f.qZA(),f.TgZ(10,"div",8),f.TgZ(11,"label",9),f.TgZ(12,"span"),f._uU(13,"*"),f.qZA(),f._uU(14," Username"),f.qZA(),f._UZ(15,"input",10),f.YNc(16,q,2,1,"div",11),f.qZA(),f.YNc(17,T,7,4,"div",12),f.TgZ(18,"div",8),f.TgZ(19,"label",13),f.TgZ(20,"span"),f._uU(21,"*"),f.qZA(),f._uU(22," FirstName"),f.qZA(),f._UZ(23,"input",14),f.YNc(24,N,2,1,"div",11),f.qZA(),f.TgZ(25,"div",8),f.TgZ(26,"label",13),f.TgZ(27,"span"),f._uU(28,"*"),f.qZA(),f._uU(29," LastName"),f.qZA(),f._UZ(30,"input",15),f.YNc(31,w,2,1,"div",11),f.qZA(),f.TgZ(32,"div",8),f.TgZ(33,"label",13),f.TgZ(34,"span"),f._uU(35,"*"),f.qZA(),f._uU(36," Email"),f.qZA(),f._UZ(37,"input",16),f.YNc(38,_,3,2,"div",11),f.qZA(),f.TgZ(39,"div",8),f.TgZ(40,"label",13),f._uU(41," Address"),f.qZA(),f._UZ(42,"input",17),f.YNc(43,S,2,1,"div",11),f.qZA(),f.TgZ(44,"div",8),f.TgZ(45,"label",13),f._uU(46," Phone"),f.qZA(),f._UZ(47,"input",18),f.YNc(48,F,2,1,"div",11),f.qZA(),f.TgZ(49,"div",8),f.TgZ(50,"label",13),f._uU(51," Image"),f.qZA(),f._UZ(52,"input",19),f.TgZ(53,"div",20),f.TgZ(54,"app-upload-file",21),f.NdJ("onChange",function(e){return t.onChangeData(e)}),f.qZA(),f.qZA(),f.YNc(55,R,2,1,"div",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(56,"app-modal-footer",0),f.NdJ("onAction",function(){return t.save()}),f.qZA()),2&e&&(f.Q6J("data",t.modalHeader),f.xp6(7),f.Q6J("formGroup",t.usersForm),f.xp6(8),f.Q6J("ngClass",f.VKq(20,U,t.submitted&&t.f.username.errors)),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.username.errors),f.xp6(1),f.Q6J("ngIf",!t.item),f.xp6(6),f.Q6J("ngClass",f.VKq(22,U,t.submitted&&t.f.firstName.errors)),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.firstName.errors),f.xp6(6),f.Q6J("ngClass",f.VKq(24,U,t.submitted&&t.f.lastName.errors)),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.lastName.errors),f.xp6(6),f.Q6J("ngClass",f.VKq(26,U,t.submitted&&t.f.email.errors)),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.email.errors),f.xp6(4),f.Q6J("ngClass",f.VKq(28,U,t.submitted&&t.f.address.errors)),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.address.errors),f.xp6(4),f.Q6J("ngClass",f.VKq(30,U,t.submitted&&t.f.phone.errors)),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.phone.errors),f.xp6(4),f.Q6J("ngClass",f.VKq(32,U,t.submitted&&t.f.imageUrl.errors)),f.xp6(2),f.Q6J("data",t.modalFile)("fileURL",t.fileURL),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.imageUrl.errors),f.xp6(1),f.Q6J("data",t.modalFooter))},directives:[g.R,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,i.mk,i.O5,v.R,h.Y],styles:[""]}),e})();var k=s(57870),O=s(59314),D=s(46913);function E(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"app-paging-server-view",8),f.NdJ("page",function(t){return f.CHM(e),f.oxw().onPage(t)}),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("data",e.data)}}const P=[{path:"",children:[{path:"list-customers",component:(()=>{class e{constructor(e,t,s){this.modalService=e,this.customerService=t,this.messageService=s,this.closeResult="",this.params={},this.settings={mode:"external",actions:{position:"right"},columns:{username:{title:"Username",type:"custom",renderComponent:k.M},firstName:{title:"First Name",type:"custom",renderComponent:k.M},lastName:{title:"Last Name",type:"custom",renderComponent:k.M},email:{title:"Email",type:"custom",renderComponent:k.M},phone:{title:"Phone",type:"custom",renderComponent:O.V}}},this.getList()}ngOnInit(){}delete(e){let t=e.data;this.messageService.confirm("Do you want to delete the customer?","Yes").then(e=>{e.isConfirmed&&this.customerService.delete(t).then(e=>{this.messageService.notification("Customer has been deleted",m.b.SUCCESS),this.getList()}).catch(e=>{var t,s;this.messageService.notification("Delete Fail",m.b.ERROR,null!==(s=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==s?s:"Server Disconnected")})})}openPopup(e){var t=this.modalService.open(L,{size:"lg"});e&&(t.componentInstance.item=e.data),t.result.then(e=>{this.getList()},e=>{})}getList(){this.customerService.get({params:this.params}).then(e=>{e.hasError||(this.customers=e.data.results,this.data=e.data)}).catch(e=>{var t,s;this.messageService.alert(null!==(s=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==s?s:"Server Disconnected",m.b.ERROR)})}onPage(e){this.params.pageIndex=e,this.getList()}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(a.FF),f.Y36(u.vZ),f.Y36(p.e))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-list-customers"]],features:[f._Bn([u.vZ])],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body","vendor-table"],[1,"custom-datatable","media-datatable"],[1,"table-responsive"],[3,"settings","source","edit","create","delete","sourceChange"],[3,"data","page",4,"ngIf"],[3,"data","page"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h5"),f._uU(4,"Customer Details"),f.qZA(),f.qZA(),f.TgZ(5,"div",3),f.TgZ(6,"div",4),f.TgZ(7,"div",5),f.TgZ(8,"ng2-smart-table",6),f.NdJ("edit",function(e){return t.openPopup(e)})("create",function(){return t.openPopup(null)})("delete",function(e){return t.delete(e)})("sourceChange",function(e){return t.customers=e}),f.qZA(),f.qZA(),f.qZA(),f.YNc(9,E,1,1,"app-paging-server-view",7),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(8),f.Q6J("settings",t.settings)("source",t.customers),f.xp6(1),f.Q6J("ngIf",(null==t.data?null:t.data.totalPage)>1))},directives:[n.T5,i.O5,D.B],styles:[""]}),e})(),data:{title:"Customer List",breadcrumb:"Customer List"}},{path:"create-customers",component:L,data:{title:"Create Customer",breadcrumb:"Create Customer"}}]}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[d.Bz.forChild(P)],d.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[i.ez,V,r.UX,a.IJ,l.m,a.bz,n.ne,o.d]]}),e})()},57870:function(e,t,s){s.d(t,{M:function(){return r}});var i=s(37716);let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-custom-view-cell-string"]],inputs:{value:"value",rowData:"rowData"},decls:2,vars:1,consts:[[1,"text-left"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.qZA()),2&e&&(i.xp6(1),i.Oqu(t.value))},styles:[""]}),e})()},59314:function(e,t,s){s.d(t,{V:function(){return r}});var i=s(37716);let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-customViewCell"]],inputs:{value:"value",rowData:"rowData"},decls:2,vars:1,consts:[[1,"text-right"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.qZA()),2&e&&(i.xp6(1),i.Oqu(t.value))},styles:[""]}),e})()}}]);