"use strict";(self.webpackChunkmultikart_backend=self.webpackChunkmultikart_backend||[]).push([[246],{60246:function(e,t,i){i.r(t),i.d(t,{PageContentModule:function(){return _}});var r=i(38583),o=i(90665),n=i(22744),s=i(15834),a=i(61861),l=i(70429),d=i(10494),c=i(98616),u=i(37716),m=i(8403);let g=(()=>{class e{constructor(e){this.httpClient=e,this.url="/api/page-content"}get(e){return this.httpClient.getObservable(this.url,e).toPromise()}update(e){return this.httpClient.putObservable(this.url,e).toPromise()}create(e){return this.httpClient.postObservable(this.url,e).toPromise()}delete(e){return this.httpClient.deleteObservable(`${this.url}/?id=${e}`).toPromise()}saveChange(e){return e.id?this.update(e):this.create(e)}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(m.Y))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e})();var p=i(57870),h=i(59314),v=i(5383),f=i(48802),Z=i(8383),C=i(20985),b=i(71279),q=i(75288),A=i(36711);function T(e,t){1&e&&(u.TgZ(0,"span",25),u._uU(1,"Required"),u.qZA())}function U(e,t){1&e&&(u.TgZ(0,"span",25),u._uU(1,"Required"),u.qZA())}function F(e,t){1&e&&(u.TgZ(0,"span",25),u._uU(1,"Required"),u.qZA())}const x=function(e){return{"is-invalid ":e}},S=function(e){return{"invalid-ckeditor":e}};let y=(()=>{class e{constructor(e,t,i,r){this.formBuilder=e,this.pageContentService=t,this.ngbActiveModal=i,this.messageService=r,this.submitted=!1,this.editor=f,this.editorConfig={extraPlugins:[Z.Z]},this.modalFile=new v.mH,this.modalFile.typeFile=v.U9.IMAGE,this.modalFile.multiBoolen=!1,this.modalFile.enityType=v.py.BANNER}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}ngOnInit(){var e;this.loadItem(),(null===(e=this.item)||void 0===e?void 0:e.imageUrl)&&(this.fileURL=[],this.item.imageUrl.split(",").forEach(e=>{this.fileURL.push(e)}))}loadItem(){this.pageContentForm=this.formBuilder.group({title:[this.item?this.item.title:"",o.kI.required],shortDes:[this.item?this.item.shortDes:""],imageUrl:[this.item?this.item.imageUrl:""],order:[this.item?this.item.order:0,o.kI.required],description:[this.item?this.item.description:"",o.kI.required]}),this.modalHeader=new v.IQ,this.modalHeader.title=this.item?"Update":"Add",this.modalFooter=new v.Jt,this.modalFooter.title="Save"}get pageContentFormControl(){return this.pageContentForm.controls}save(){this.submitted=!0,!this.pageContentForm.invalid&&(this.pageContent={id:this.item?this.item.id:"",title:this.pageContentForm.value.title.trim(),description:this.pageContentForm.value.description,imageUrl:this.pageContentForm.controls.imageUrl.value,shortDes:this.pageContentForm.value.shortDes.trim(),order:this.pageContentForm.value.order,files:this.modalFile.listFile},this.callServiceToSave())}callServiceToSave(){this.pageContentService.saveChange(this.pageContent).then(()=>{this.messageService.notification(this.item?"Update Success":"Create Success",c.b.SUCCESS),this.ngbActiveModal.close(),this.submitted=!1}).catch(e=>{var t,i;this.messageService.alert(null!==(i=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==i?i:"Server Disconnected",c.b.ERROR)})}close(e){this.ngbActiveModal.dismiss()}onChangeData(e){null!=e&&(this.fileURL||(this.fileURL=[]),e.add&&(this.fileURL=[...this.fileURL,...e.add]),e.remove&&this.fileURL.forEach((t,i)=>{t.includes(e.remove)&&this.fileURL.splice(i,1)}),e.removeAll&&(this.fileURL=[]),this.pageContentForm.controls.imageUrl.setValue(this.fileURL.join(",")))}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(o.qu),u.Y36(g),u.Y36(s.Kz),u.Y36(C.e))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-page-content-details"]],inputs:{item:"item"},features:[u._Bn([g])],decls:50,vars:20,consts:[[3,"data","onAction"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card","tab2-card"],[1,"card-body"],["id","account","role","tabpanel","aria-labelledby","account-tab",1,"tab-pane","fade","active","show"],["novalidate","",1,"needs-validation","user-add",3,"formGroup"],[1,"form-group","row"],[1,"col-xl-3","col-md-4","d-flex","flex-column"],["type","text","formControlName","title",1,"form-control","col-xl-9","col-md-8",3,"ngClass"],[1,"invalid-feedback","offset-md-4","offset-xl-3"],["class","text-danger",4,"ngIf"],[1,"col-xl-3","col-md-4"],["rows","4","role","textbox","formControlName","shortDes",1,"form-control","col-xl-9","col-md-8"],["type","number","formControlName","order",1,"form-control","col-xl-9","col-md-8",3,"ngClass"],["for","validationCustom2",1,"col-xl-3","col-md-4","d-flex","flex-column"],["id","validationCustom2","type","text","formControlName","imageUrl","hidden","",1,"form-control","col-xl-8","col-md-7"],[1,"col-xl-9","col-md-8","p-0"],["styleFile","width: 100%; height: auto;",3,"data","fileURL","onChange"],[1,"col-11","pb-2","d-flex"],[1,"d-flex","mr-2"],[1,"mr-1"],[1,"invalid-feedback","d-block"],["type","text","formControlName","description",1,"col-12","p-0",3,"editor","config","ngClass","ready"],[1,"text-danger"]],template:function(e,t){1&e&&(u.TgZ(0,"app-modal-header",0),u.NdJ("onAction",function(e){return t.close(e)}),u.qZA(),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"div",5),u.TgZ(6,"div",6),u.TgZ(7,"form",7),u.TgZ(8,"h4"),u._uU(9,"Page Content Details"),u.qZA(),u.TgZ(10,"div",8),u.TgZ(11,"label",9),u.TgZ(12,"div"),u.TgZ(13,"span"),u._uU(14,"*"),u.qZA(),u._uU(15," Title"),u.qZA(),u.qZA(),u._UZ(16,"input",10),u.TgZ(17,"div",11),u.YNc(18,T,2,0,"span",12),u.qZA(),u.qZA(),u.TgZ(19,"div",8),u.TgZ(20,"label",13),u.TgZ(21,"div"),u._uU(22,"Short Description"),u.qZA(),u.qZA(),u._UZ(23,"textarea",14),u.qZA(),u.TgZ(24,"div",8),u.TgZ(25,"label",13),u.TgZ(26,"div"),u.TgZ(27,"span"),u._uU(28,"*"),u.qZA(),u._uU(29," Display Order"),u.qZA(),u.qZA(),u._UZ(30,"input",15),u.TgZ(31,"div",11),u.YNc(32,U,2,0,"span",12),u.qZA(),u.qZA(),u.TgZ(33,"div",8),u.TgZ(34,"label",16),u.TgZ(35,"div"),u._uU(36,"Image"),u.qZA(),u.qZA(),u._UZ(37,"input",17),u.TgZ(38,"div",18),u.TgZ(39,"app-upload-file",19),u.NdJ("onChange",function(e){return t.onChangeData(e)}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(40,"div",8),u.TgZ(41,"label",20),u.TgZ(42,"div",21),u.TgZ(43,"span",22),u._uU(44,"*"),u.qZA(),u._uU(45," Description "),u.qZA(),u.TgZ(46,"div",23),u.YNc(47,F,2,0,"span",12),u.qZA(),u.qZA(),u.TgZ(48,"ckeditor",24),u.NdJ("ready",function(e){return t.onReady(e)}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(49,"app-modal-footer",0),u.NdJ("onAction",function(){return t.save()}),u.qZA()),2&e&&(u.Q6J("data",t.modalHeader),u.xp6(7),u.Q6J("formGroup",t.pageContentForm),u.xp6(9),u.Q6J("ngClass",u.VKq(14,x,t.submitted&&(null==t.pageContentFormControl.title.errors?null:t.pageContentFormControl.title.errors.required))),u.xp6(2),u.Q6J("ngIf",t.submitted&&(null==t.pageContentFormControl.title.errors?null:t.pageContentFormControl.title.errors.required)),u.xp6(12),u.Q6J("ngClass",u.VKq(16,x,t.submitted&&(null==t.pageContentFormControl.order.errors?null:t.pageContentFormControl.order.errors.required))),u.xp6(2),u.Q6J("ngIf",t.submitted&&(null==t.pageContentFormControl.order.errors?null:t.pageContentFormControl.order.errors.required)),u.xp6(7),u.Q6J("data",t.modalFile)("fileURL",t.fileURL),u.xp6(8),u.Q6J("ngIf",t.submitted&&(null==t.pageContentFormControl.description.errors?null:t.pageContentFormControl.description.errors.required)),u.xp6(1),u.Q6J("editor",t.editor)("config",t.editorConfig)("config",t.editorConfig)("ngClass",u.VKq(18,S,t.submitted&&(null==t.pageContentFormControl.description.errors?null:t.pageContentFormControl.description.errors.required))),u.xp6(1),u.Q6J("data",t.modalFooter))},directives:[b.R,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,r.mk,r.O5,o.wV,q.R,n.u,A.Y],styles:[".invalid-ckeditor[_ngcontent-%COMP%]{box-shadow:#dc354540 0 0 0 .2rem}"]}),e})();const R=[{path:"",children:[{path:"list-page-content",component:(()=>{class e{constructor(e,t,i){this.modalService=e,this.service=t,this.messageService=i,this.settings={mode:"external",pager:{display:!0,perPage:10},actions:{position:"right"},columns:{title:{title:"Title",type:"custom",renderComponent:p.M},shortDes:{title:"Short Description",type:"custom",renderComponent:p.M},order:{title:"Display Order",value:"order",type:"custom",renderComponent:h.V}}},this.getList()}openPopup(e){var t=this.modalService.open(y,{size:"lg"});e&&(t.componentInstance.item=e.data),e||(t.componentInstance.item=e),t.result.then(e=>{this.getList()},e=>{})}getList(){this.service.get(null).then(e=>{e.hasError||(this.pageContents=e.data)}).catch(e=>{var t,i;this.messageService.alert(null!==(i=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==i?i:"Server Disconnected",c.b.ERROR)})}delete(e){"00000000-0000-0000-0000-000000000001"!=e.data.id&&"00000000-0000-0000-0000-000000000002"!=e.data.id&&"00000000-0000-0000-0000-000000000003"!=e.data.id?this.messageService.confirm("Do you want to delete the page content?").then(t=>{t.isConfirmed&&this.service.delete(e.data.id).then(()=>{this.messageService.notification("Page content has been deleted",c.b.SUCCESS),this.getList()}).catch(e=>{var t,i;this.messageService.alert(null!==(i=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==i?i:"Server Disconnected",c.b.ERROR)})}):this.messageService.alert("Your access permissions may be inadequate to perform the requested operation on this resource.",c.b.INFO)}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(s.FF),u.Y36(g),u.Y36(C.e))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-list-page-content"]],features:[u._Bn([g])],decls:9,vars:2,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body","vendor-table"],[1,"custom-datatable","media-datatable"],[1,"table-responsive"],[3,"settings","source","create","edit","delete","sourceChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h5"),u._uU(4,"Page Content Details"),u.qZA(),u.qZA(),u.TgZ(5,"div",3),u.TgZ(6,"div",4),u.TgZ(7,"div",5),u.TgZ(8,"ng2-smart-table",6),u.NdJ("create",function(){return t.openPopup(null)})("edit",function(e){return t.openPopup(e)})("delete",function(e){return t.delete(e)})("sourceChange",function(e){return t.pageContents=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(8),u.Q6J("settings",t.settings)("source",t.pageContents))},directives:[a.T5],styles:[""]}),e})(),data:{title:"Page Content List",breadcrumb:"Page Content List"}}]}];let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[d.Bz.forChild(R)],d.Bz]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.ez,J,o.UX,s.IJ,l.m,s.bz,a.ne,n.d]]}),e})()}}]);