"use strict";(self.webpackChunkmultikart_backend=self.webpackChunkmultikart_backend||[]).push([[731],{24731:function(e,r,t){t.r(r),t.d(r,{ProductModule:function(){return M}});var o=t(38583),i=t(90665),s=t(22744),n=t(15834),l=t(61861),a=t(70429),d=t(10494),c=t(98616),u=t(22197),m=t(18217),p=t(58676),g=t(59314),h=t(19865),f=t(5383),Z=t(48802),v=t(8383),C=t(37716),q=t(20985),F=t(71279),A=t(75288),y=t(36711);function T(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Required"),C.qZA())}function x(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Max: 50 characters"),C.qZA())}function b(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Min: 3 characters"),C.qZA())}function U(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Required"),C.qZA())}function I(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Max: 300 character"),C.qZA())}function J(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Required"),C.qZA())}function R(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Value must in range (1 ~ 5000000)"),C.qZA())}function N(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Value must in range (1 ~ 5000000)"),C.qZA())}function _(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Required"),C.qZA())}function S(e,r){if(1&e&&(C.TgZ(0,"option",34),C._uU(1),C.qZA()),2&e){const e=r.$implicit;C.s9C("value",e.id),C.xp6(1),C.hij(" ",e.name," ")}}function k(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Required"),C.qZA())}function O(e,r){1&e&&(C.TgZ(0,"span",33),C._uU(1,"Required"),C.qZA())}const Q=function(e){return{"is-invalid ":e}};let D=(()=>{class e{constructor(e,r,t,o,i){this.formBuilder=e,this.productService=r,this.ngbActiveModal=t,this.categoryService=o,this.messageService=i,this.regex="^[a-z|A-Z|\xc0\xc1\xc2\xc3\xc8\xc9\xca\xcc\xcd\xd2\xd3\xd4\xd5\xd9\xda\u0102\u0110\u0128\u0168\u01a0\xe0\xe1\xe2\xe3\xe8\xe9\xea\xec\xed\xf2\xf3\xf4\xf5\xf9\xfa\u0103\u0111\u0129\u0169\u01a1\u01af\u0102\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ec0\u1ec0\u1ec2\u1ebe\u01b0\u0103\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ec1\u1ec1\u1ec3\u1ebf\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1ec5\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eec\u1eee\u1ef0\u1ef2\u1ef4\xdd\u1ef6\u1ef8\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9|0-9 ,-.]*$",this.submitted=!1,this.editor=Z,this.editorConfig={extraPlugins:[v.Z]},this.modalFile=new f.mH,this.modalFile.typeFile=f.U9.IMAGE,this.modalFile.multiBoolen=!0,this.modalFile.enityType=f.py.PRODUCT}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}ngOnChanges(e){}get productFormsControl(){return this.productsForm.controls}fetchCategory(){this.categoryService.get(null).then(e=>{e.hasError||(this.categories=e.data.results.filter(e=>0==e.isDeleted))}).catch(e=>{var r,t;this.messageService.alert(null!==(t=null!==(r=e.error.message)&&void 0!==r?r:JSON.stringify(e.error.error))&&void 0!==t?t:"Server Disconnected",c.b.ERROR)})}save(){return this.productsForm.invalid?(this.messageService.alert("Invalid Form make sure you input valid value !",c.b.ERROR),void(this.submitted=!0)):(this.submitted=!0,this.product={name:this.productsForm.value.name,description:this.productsForm.value.description,contentHTML:this.productsForm.value.contentHTML,imageUrl:this.productsForm.value.imageUrl,price:this.productsForm.value.price,categoryName:this.categories.filter(e=>e.id==this.productsForm.value.category)[0].name,categoryId:this.productsForm.value.category,displayOrder:this.productsForm.value.displayOrder,hasDisplayHomePage:this.productsForm.value.hasDisplayHomePage,isFeatured:this.productsForm.value.isFeatured,id:this.item?this.item.id:"",files:this.modalFile.listFile},this.productService.save(this.product).then(()=>{this.messageService.notification(this.item?"Product has been updated":"Product has been created",c.b.SUCCESS),this.ngbActiveModal.close()}).catch(e=>{var r,t;this.messageService.alert(null!==(t=null!==(r=e.error.message)&&void 0!==r?r:JSON.stringify(e.error.error))&&void 0!==t?t:"Server Disconnected",c.b.ERROR)}))}loadItem(){this.productsForm=this.formBuilder.group({name:[this.item?this.item.name:"",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(50),i.kI.pattern(this.regex)]],description:[this.item?this.item.description:"",[i.kI.required,i.kI.maxLength(300),i.kI.pattern(this.regex)]],contentHTML:[this.item?this.item.contentHTML:""],imageUrl:[this.item?this.item.imageUrl:"",[i.kI.required]],price:[this.item?this.item.price:this.item,[i.kI.required,i.kI.min(1),i.kI.max(5e6),i.kI.pattern("[0-9]*")]],category:[this.item?this.item.categoryId:"",[i.kI.required]],displayOrder:[this.item?this.item.displayOrder:1,[i.kI.required,i.kI.max(1e6),i.kI.pattern("[0-9]+")]],hasDisplayHomePage:[!!this.item&&this.item.hasDisplayHomePage],isFeatured:[!!this.item&&this.item.isFeatured]}),this.modalHeader=new f.IQ,this.modalHeader.title=this.item?`Update ${this.item.name}`:"Add New Product",this.modalFooter=new f.Jt,this.modalFooter.title="Save"}close(e){this.ngbActiveModal.dismiss()}ngOnInit(){this.fetchCategory(),this.loadItem(),this.item&&(this.fileURL=[],this.item.imageUrl.split(",").forEach(e=>{this.fileURL.push(e)}))}onChangeData(e){null!=e&&(this.fileURL||(this.fileURL=[]),e.add&&(this.fileURL=[...this.fileURL,...e.add]),e.remove&&this.fileURL.forEach((r,t)=>{r.includes(e.remove)&&this.fileURL.splice(t,1)}),e.removeAll&&(this.fileURL=[]),this.productsForm.controls.imageUrl.setValue(this.fileURL.join(",")))}}return e.\u0275fac=function(r){return new(r||e)(C.Y36(i.qu),C.Y36(u.M),C.Y36(n.Kz),C.Y36(h.H),C.Y36(q.e))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-product-details"]],features:[C._Bn([u.M,h.H]),C.TTD],decls:77,vars:37,consts:[[3,"data","onAction"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12"],[1,"card","tab2-card"],[1,"card-body"],["id","account","role","tabpanel","aria-labelledby","account-tab",1,"tab-pane","fade","active","show"],["novalidate","",1,"needs-validation","user-add",3,"formGroup"],[1,"col-lg-6"],[1,"form-group","row"],["for","validationCustom0",1,"col-xl-3","col-md-4"],["id","validationCustom0","type","text","required","","formControlName","name",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"invalid-feedback","col-md-3","offset-md-3"],["class","text-danger",4,"ngIf"],["for","validationCustom1",1,"col-xl-3","col-md-4"],["id","validationCustom1","type","text","required","","formControlName","description",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["for","validationCustom5",1,"col-xl-3","col-md-4"],["id","validationCustom5","type","number","required","","formControlName","price",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["for","validationCustom7",1,"col-xl-3","col-md-4"],["id","validationCustom7","type","number","required","","formControlName","displayOrder",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["for","validationCustom6",1,"col-xl-3","col-md-4"],["formControlName","category",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback","col-md-3","offset-md-0"],["for","validationCustom8",1,"col-xl-7","col-md-4"],["id","validationCustom8","type","checkbox","formControlName","hasDisplayHomePage",1,"form-check-input","col-xl-10","col-md-6"],["for","validationCustom9",1,"col-xl-7","col-md-4"],["id","validationCustom9","type","checkbox","formControlName","isFeatured",1,"form-check-input","col-xl-10","col-md-6"],[1,"col-lg-6","col-md-6","col-sm-6"],["id","validationCustom4","type","text","formControlName","imageUrl","required","","hidden","",1,"form-control","col-lg-6","col-md-6","col-sm-6",3,"ngClass"],["styleFile","width: 350px; height: 300px;","sizeImage","650 x 700",3,"data","fileURL","onChange"],["for","validationCustom3",1,"col-xl-6","col-md-4"],["id","validationCustom3","type","text","formControlName","contentHTML",1,"col-xl-12","col-md-12","p-0",3,"editor","config","ready"],[1,"text-danger"],[3,"value"]],template:function(e,r){1&e&&(C.TgZ(0,"app-modal-header",0),C.NdJ("onAction",function(e){return r.close(e)}),C.qZA(),C.TgZ(1,"div",1),C.TgZ(2,"div",2),C.TgZ(3,"div",3),C.TgZ(4,"div",4),C.TgZ(5,"div",5),C.TgZ(6,"div",2),C.TgZ(7,"div",3),C.TgZ(8,"div",6),C.TgZ(9,"form",7),C.TgZ(10,"div",2),C.TgZ(11,"div",8),C.TgZ(12,"div",9),C.TgZ(13,"label",10),C.TgZ(14,"span"),C._uU(15,"*"),C.qZA(),C._uU(16," Name"),C.qZA(),C._UZ(17,"input",11),C.TgZ(18,"div",12),C.YNc(19,T,2,0,"span",13),C.YNc(20,x,2,0,"span",13),C.YNc(21,b,2,0,"span",13),C.qZA(),C.qZA(),C.TgZ(22,"div",9),C.TgZ(23,"label",14),C.TgZ(24,"span"),C._uU(25,"*"),C.qZA(),C._uU(26," Product Details"),C.qZA(),C._UZ(27,"input",15),C.TgZ(28,"div",12),C.YNc(29,U,2,0,"span",13),C.YNc(30,I,2,0,"span",13),C.qZA(),C.qZA(),C.TgZ(31,"div",9),C.TgZ(32,"label",16),C.TgZ(33,"span"),C._uU(34,"*"),C.qZA(),C._uU(35," Price"),C.qZA(),C._UZ(36,"input",17),C.TgZ(37,"div",12),C.YNc(38,J,2,0,"span",13),C.YNc(39,R,2,0,"span",13),C.YNc(40,N,2,0,"span",13),C.qZA(),C.qZA(),C.TgZ(41,"div",9),C.TgZ(42,"label",18),C.TgZ(43,"span"),C._uU(44,"*"),C.qZA(),C._uU(45," Display Order"),C.qZA(),C._UZ(46,"input",19),C.TgZ(47,"div",12),C.YNc(48,_,2,0,"span",13),C.qZA(),C.qZA(),C.TgZ(49,"div",9),C.TgZ(50,"label",20),C.TgZ(51,"span"),C._uU(52,"*"),C.qZA(),C._uU(53," Category Name"),C.qZA(),C.TgZ(54,"select",21),C.YNc(55,S,2,2,"option",22),C.qZA(),C.TgZ(56,"div",23),C.YNc(57,k,2,0,"span",13),C.qZA(),C.qZA(),C.TgZ(58,"div",9),C.TgZ(59,"label",24),C._uU(60," Display Home Page"),C.qZA(),C._UZ(61,"input",25),C.qZA(),C.TgZ(62,"div",9),C.TgZ(63,"label",26),C._uU(64," Is Featured"),C.qZA(),C._UZ(65,"input",27),C.qZA(),C.qZA(),C.TgZ(66,"div",28),C.TgZ(67,"div",9),C._UZ(68,"input",29),C.TgZ(69,"app-upload-file",30),C.NdJ("onChange",function(e){return r.onChangeData(e)}),C.qZA(),C.TgZ(70,"div",12),C.YNc(71,O,2,0,"span",13),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(72,"div",9),C.TgZ(73,"label",31),C._uU(74," Description"),C.qZA(),C.TgZ(75,"ckeditor",32),C.NdJ("ready",function(e){return r.onReady(e)}),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(76,"app-modal-footer",0),C.NdJ("onAction",function(){return r.save()}),C.qZA()),2&e&&(C.Q6J("data",r.modalHeader),C.xp6(9),C.Q6J("formGroup",r.productsForm),C.xp6(8),C.Q6J("ngClass",C.VKq(25,Q,(r.productFormsControl.name.touched||r.submitted)&&(null==r.productFormsControl.name.errors?null:r.productFormsControl.name.errors.required)||r.productFormsControl.name.hasError("maxlength")||r.productFormsControl.name.hasError("minlength"))),C.xp6(2),C.Q6J("ngIf",(r.productFormsControl.name.touched||r.submitted)&&(null==r.productFormsControl.name.errors?null:r.productFormsControl.name.errors.required)),C.xp6(1),C.Q6J("ngIf",r.productFormsControl.name.hasError("maxlength")),C.xp6(1),C.Q6J("ngIf",r.productFormsControl.name.hasError("minlength")),C.xp6(6),C.Q6J("ngClass",C.VKq(27,Q,(r.productFormsControl.description.touched||r.submitted)&&(null==r.productFormsControl.description.errors?null:r.productFormsControl.description.errors.required)||r.productFormsControl.description.hasError("maxlength"))),C.xp6(2),C.Q6J("ngIf",(r.productFormsControl.description.touched||r.submitted)&&(null==r.productFormsControl.description.errors?null:r.productFormsControl.description.errors.required)),C.xp6(1),C.Q6J("ngIf",r.productFormsControl.description.hasError("maxlength")),C.xp6(6),C.Q6J("ngClass",C.VKq(29,Q,(r.productFormsControl.price.touched||r.submitted)&&(null==r.productFormsControl.price.errors?null:r.productFormsControl.price.errors.required)||(null==r.productFormsControl.price.errors?null:r.productFormsControl.price.errors.max)||(null==r.productFormsControl.price.errors?null:r.productFormsControl.price.errors.min))),C.xp6(2),C.Q6J("ngIf",(r.productFormsControl.price.touched||r.submitted)&&(null==r.productFormsControl.price.errors?null:r.productFormsControl.price.errors.required)),C.xp6(1),C.Q6J("ngIf",null==r.productFormsControl.price.errors?null:r.productFormsControl.price.errors.max),C.xp6(1),C.Q6J("ngIf",null==r.productFormsControl.price.errors?null:r.productFormsControl.price.errors.min),C.xp6(6),C.Q6J("ngClass",C.VKq(31,Q,(r.productFormsControl.displayOrder.touched||r.submitted)&&(null==r.productFormsControl.displayOrder.errors?null:r.productFormsControl.displayOrder.errors.required))),C.xp6(2),C.Q6J("ngIf",(r.productFormsControl.displayOrder.touched||r.submitted)&&(null==r.productFormsControl.displayOrder.errors?null:r.productFormsControl.displayOrder.errors.required)),C.xp6(6),C.Q6J("ngClass",C.VKq(33,Q,(r.productFormsControl.category.touched||r.submitted)&&(null==r.productFormsControl.category.errors?null:r.productFormsControl.category.errors.required))),C.xp6(1),C.Q6J("ngForOf",r.categories),C.xp6(2),C.Q6J("ngIf",(r.productFormsControl.category.touched||r.submitted)&&(null==r.productFormsControl.category.errors?null:r.productFormsControl.category.errors.required)),C.xp6(11),C.Q6J("ngClass",C.VKq(35,Q,(r.productFormsControl.imageUrl.touched||r.submitted)&&(null==r.productFormsControl.imageUrl.errors?null:r.productFormsControl.imageUrl.errors.required))),C.xp6(1),C.Q6J("data",r.modalFile)("fileURL",r.fileURL),C.xp6(2),C.Q6J("ngIf",(r.productFormsControl.imageUrl.touched||r.submitted)&&(null==r.productFormsControl.imageUrl.errors?null:r.productFormsControl.imageUrl.errors.required)),C.xp6(4),C.Q6J("editor",r.editor)("config",r.editorConfig),C.xp6(1),C.Q6J("data",r.modalFooter))},directives:[F.R,i._Y,i.JL,i.sg,i.Fj,i.Q7,i.JJ,i.u,o.mk,o.O5,i.wV,i.EJ,o.sg,i.Wl,A.R,s.u,y.Y,i.YN,i.Kr],styles:[""]}),e})();var E=t(57870),P=t(46913);function L(e,r){if(1&e){const e=C.EpF();C.TgZ(0,"app-paging-server-view",8),C.NdJ("page",function(r){return C.CHM(e),C.oxw().onPage(r)}),C.qZA()}if(2&e){const e=C.oxw();C.Q6J("data",e.data)}}const Y=[{path:"",children:[{path:"list-products",component:(()=>{class e{constructor(e,r,t){this.modalService=e,this.productService=r,this.messageService=t,this.params={},this.closeResult="",this.settings={mode:"external",actions:{position:"right"},columns:{imageUrl:{title:"Image",type:"custom",renderComponent:m.V,filter:!1},name:{title:"Name",type:"custom",renderComponent:E.M},description:{title:"Product Details",filter:!1},categoryName:{title:"Category Name",filter:!1},isFeatured:{title:"Is Featured",filter:!1},price:{type:"custom",title:"Price",renderComponent:p.x,filter:!1},displayOrder:{title:"Display Order",type:"custom",renderComponent:g.V,filter:!1}}},this.params.pageIndex=0,this.fetch()}delete(e){let r=e.data;this.messageService.confirm("Are you sure to delete this item?","Yes").then(e=>{e.isConfirmed&&this.productService.delete(r).then(()=>{this.messageService.notification("Delete successful",c.b.SUCCESS),this.fetch()}).catch(e=>{var r,t;return this.messageService.alert(null!==(t=null!==(r=e.error.message)&&void 0!==r?r:JSON.stringify(e.error.error))&&void 0!==t?t:"Server Disconnected",c.b.ERROR)})})}openPopup(e){var r=this.modalService.open(D,{size:"xl"});return r.componentInstance.item=null==e?void 0:e.data,r.result.then(()=>{this.fetch()},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}fetch(){this.productService.get({params:this.params}).then(e=>{e.hasError||(this.products=e.data.results,this.data=e.data)}).catch(e=>{var r,t;this.messageService.alert(null!==(t=null!==(r=e.error.message)&&void 0!==r?r:JSON.stringify(e.error.error))&&void 0!==t?t:"Server Disconnected",c.b.ERROR)})}getDismissReason(e){return e===n.If.ESC?"by pressing ESC":e===n.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}ngOnInit(){}onPage(e){this.params.pageIndex=e,this.fetch()}}return e.\u0275fac=function(r){return new(r||e)(C.Y36(n.FF),C.Y36(u.M),C.Y36(q.e))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-list-products"]],features:[C._Bn([u.M])],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body","vendor-table"],["id","batchDelete",1,"custom-datatable","media-datatable"],[1,"table-responsive"],[3,"settings","source","edit","create","delete"],[3,"data","page",4,"ngIf"],[3,"data","page"]],template:function(e,r){1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"div",1),C.TgZ(2,"div",2),C.TgZ(3,"h5"),C._uU(4,"Product Details"),C.qZA(),C.qZA(),C.TgZ(5,"div",3),C.TgZ(6,"div",4),C.TgZ(7,"div",5),C.TgZ(8,"ng2-smart-table",6),C.NdJ("edit",function(e){return r.openPopup(e)})("create",function(){return r.openPopup(null)})("delete",function(e){return r.delete(e)}),C.qZA(),C.qZA(),C.qZA(),C.YNc(9,L,1,1,"app-paging-server-view",7),C.qZA(),C.qZA(),C.qZA()),2&e&&(C.xp6(8),C.Q6J("settings",r.settings)("source",r.products),C.xp6(1),C.Q6J("ngIf",(null==r.data?null:r.data.totalPage)>1))},directives:[l.T5,o.O5,P.B],styles:[""]}),e})(),data:{title:"Product List",breadcrumb:"Product List"}}]}];let w=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[[d.Bz.forChild(Y)],d.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[[o.ez,w,i.UX,n.IJ,a.m,n.bz,l.ne,s.d]]}),e})()}}]);