"use strict";(self.webpackChunkmultikart_backend=self.webpackChunkmultikart_backend||[]).push([[43],{86043:function(e,t,o){o.r(t),o.d(t,{BlogsModule:function(){return R}});var r=o(38583),i=o(90665),l=o(15834),s=o(61861),n=o(37716),a=o(8403);let d=(()=>{class e{constructor(e){this.httpClient=e,this.url="/api/blog"}get(e){return this.httpClient.getObservable(this.url,e).toPromise()}create(e){return this.httpClient.postObservable(this.url,e).toPromise()}update(e){return this.httpClient.putObservable(this.url,e).toPromise()}delete(e){return this.httpClient.deleteObservable(`${this.url}/?id=${null==e?void 0:e.id}`).toPromise()}save(e){return e.id?this.update(e):this.create(e)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(a.Y))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var g=o(70429),m=o(10494),u=o(98616),c=o(57870),h=o(59314),p=o(18217),b=o(5383),f=o(48802),v=o(8383),Z=o(20985),C=o(71279),q=o(75288),T=o(22744),A=o(36711);function F(e,t){1&e&&(n.TgZ(0,"span",20),n._uU(1," Title is required or invalid "),n.qZA())}function U(e,t){1&e&&(n.TgZ(0,"span",20),n._uU(1," Short description is required or invalid "),n.qZA())}function y(e,t){1&e&&(n.TgZ(0,"span",20),n._uU(1," Image is required "),n.qZA())}function x(e,t){1&e&&(n.TgZ(0,"span",20),n._uU(1," Content is required "),n.qZA())}const S=function(e){return{"is-invalid ":e}};let J=(()=>{class e{constructor(e,t,o,r){this.formBuilder=e,this.ngbActiveModal=t,this.blogService=o,this.messageService=r,this.submitted=!1,this.editor=f,this.editorConfig={extraPlugins:[v.Z]},this.modalFile=new b.mH,this.modalFile.typeFile=b.U9.IMAGE,this.modalFile.multiBoolen=!1,this.modalFile.enityType=b.py.BLOG}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}ngOnInit(){this.loadFormItem(),this.createModal(),this.item&&(this.fileURL=[],this.fileURL.push(this.item.imageUrl))}loadFormItem(){this.blogForm=this.formBuilder.group({title:[this.item?this.item.title:"",i.kI.required],shortDes:[this.item?this.item.shortDes:"",i.kI.required],contentHTML:[this.item?this.item.contentHTML:"",i.kI.required],imageUrl:[this.item?this.item.imageUrl:"",i.kI.required]})}createModal(){this.modalHeader=new b.IQ,this.modalHeader.title=null!=this.item?`Update ${this.item.title}`:"Add Blog",this.modalFooter=new b.Jt,this.modalFooter.title="Save"}saveBlog(e){this.blog={title:this.blogForm.controls.title.value.trim(),shortDes:this.blogForm.controls.shortDes.value.trim(),contentHTML:this.blogForm.controls.contentHTML.value,imageUrl:this.blogForm.controls.imageUrl.value,id:this.item?this.item.id:"",createdByName:this.item?this.item.createdByName:""},this.submitted=!0,this.blogForm.valid&&this.blogService.save(this.blog).then(()=>{this.messageService.notification(this.item?"Update Success":"Create Success",u.b.SUCCESS),this.blogForm.reset(),this.submitted=!1,this.ngbActiveModal.close()}).catch(e=>{var t;this.messageService.alert(null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error),u.b.ERROR)})}close(e){this.ngbActiveModal.dismiss()}get blogFormControl(){return this.blogForm.controls}onChangeData(e){null!=e&&(this.fileURL||(this.fileURL=[]),e.add&&(this.fileURL=[...this.fileURL,...e.add]),e.remove&&this.fileURL.forEach((t,o)=>{t.includes(e.remove)&&this.fileURL.splice(o,1)}),e.removeAll&&(this.fileURL=[]),this.blogForm.controls.imageUrl.setValue(this.fileURL.join(",")))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.qu),n.Y36(l.Kz),n.Y36(d),n.Y36(Z.e))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-blogs-detail"]],decls:45,vars:24,consts:[[3,"data","onAction"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card","tab2-card"],[1,"card-body"],["id","account","role","tabpanel","aria-labelledby","account-tab",1,"tab-pane","fade","active","show"],["novalidate","",1,"needs-validation","user-add",3,"formGroup"],[1,"form-group","row"],["for","validationCustom0",1,"col-xl-3","col-md-4"],["id","validationCustom0","type","text","required","","formControlName","title",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"invalid-feedback","col-md-5","offset-md-3"],["class","text-danger",4,"ngIf"],["for","",1,"col-xl-3","col-md-4"],["id","","type","text","formControlName","shortDes",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["for","validationCustom2",1,"col-xl-3","col-md-4"],["id","validationCustom2","type","text","formControlName","imageUrl","hidden","",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"col-xl-8","col-md-7","p-0"],["styleFile","width: 100%; height: auto;",3,"data","fileURL","onChange"],["id","validationCustom1","type","text","formControlName","contentHTML",1,"col-xl-8","col-md-7","p-0",3,"editor","config","ngClass","ready"],[1,"text-danger"]],template:function(e,t){1&e&&(n.TgZ(0,"app-modal-header",0),n.NdJ("onAction",function(e){return t.close(e)}),n.qZA(),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n.TgZ(7,"form",7),n.TgZ(8,"h4"),n._uU(9,"Blog Details"),n.qZA(),n.TgZ(10,"div",8),n.TgZ(11,"label",9),n.TgZ(12,"span"),n._uU(13,"*"),n.qZA(),n._uU(14," Title"),n.qZA(),n._UZ(15,"input",10),n.TgZ(16,"div",11),n.YNc(17,F,2,0,"span",12),n.qZA(),n.qZA(),n.TgZ(18,"div",8),n.TgZ(19,"label",13),n.TgZ(20,"span"),n._uU(21,"*"),n.qZA(),n._uU(22," Short description"),n.qZA(),n._UZ(23,"input",14),n.TgZ(24,"div",11),n.YNc(25,U,2,0,"span",12),n.qZA(),n.qZA(),n.TgZ(26,"div",8),n.TgZ(27,"label",15),n.TgZ(28,"span"),n._uU(29,"*"),n.qZA(),n._uU(30," Image"),n.qZA(),n._UZ(31,"input",16),n.TgZ(32,"div",17),n.TgZ(33,"app-upload-file",18),n.NdJ("onChange",function(e){return t.onChangeData(e)}),n.qZA(),n.qZA(),n.TgZ(34,"div",11),n.YNc(35,y,2,0,"span",12),n.qZA(),n.qZA(),n.TgZ(36,"div",8),n.TgZ(37,"label",13),n.TgZ(38,"span"),n._uU(39,"*"),n.qZA(),n._uU(40," Content"),n.qZA(),n.TgZ(41,"ckeditor",19),n.NdJ("ready",function(e){return t.onReady(e)}),n.qZA(),n.TgZ(42,"div",11),n.YNc(43,x,2,0,"span",12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(44,"app-modal-footer",0),n.NdJ("onAction",function(e){return t.saveBlog(e)}),n.qZA()),2&e&&(n.Q6J("data",t.modalHeader),n.xp6(7),n.Q6J("formGroup",t.blogForm),n.xp6(8),n.Q6J("ngClass",n.VKq(16,S,(t.blogFormControl.title.touched||t.submitted)&&(null==t.blogFormControl.title.errors?null:t.blogFormControl.title.errors.required))),n.xp6(2),n.Q6J("ngIf",(t.blogFormControl.title.touched||t.submitted)&&(null==t.blogFormControl.title.errors?null:t.blogFormControl.title.errors.required)),n.xp6(6),n.Q6J("ngClass",n.VKq(18,S,(t.blogFormControl.shortDes.touched||t.submitted)&&(null==t.blogFormControl.shortDes.errors?null:t.blogFormControl.shortDes.errors.required))),n.xp6(2),n.Q6J("ngIf",(t.blogFormControl.shortDes.touched||t.submitted)&&(null==t.blogFormControl.shortDes.errors?null:t.blogFormControl.shortDes.errors.required)),n.xp6(6),n.Q6J("ngClass",n.VKq(20,S,(t.blogFormControl.imageUrl.touched||t.submitted)&&(null==t.blogFormControl.imageUrl.errors?null:t.blogFormControl.imageUrl.errors.required))),n.xp6(2),n.Q6J("data",t.modalFile)("fileURL",t.fileURL),n.xp6(2),n.Q6J("ngIf",(t.blogFormControl.imageUrl.touched||t.submitted)&&(null==t.blogFormControl.imageUrl.errors?null:t.blogFormControl.imageUrl.errors.required)),n.xp6(6),n.Q6J("editor",t.editor)("config",t.editorConfig)("ngClass",n.VKq(22,S,(t.blogFormControl.shortDes.touched||t.submitted)&&(null==t.blogFormControl.shortDes.errors?null:t.blogFormControl.shortDes.errors.required)))("config",t.editorConfig),n.xp6(2),n.Q6J("ngIf",(t.blogFormControl.contentHTML.touched||t.submitted)&&(null==t.blogFormControl.contentHTML.errors?null:t.blogFormControl.contentHTML.errors.required)),n.xp6(1),n.Q6J("data",t.modalFooter))},directives:[C.R,i._Y,i.JL,i.sg,i.Fj,i.Q7,i.JJ,i.u,r.mk,r.O5,q.R,T.u,A.Y],styles:[""]}),e})();var D=o(46913);function B(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"app-paging-server-view",8),n.NdJ("page",function(t){return n.CHM(e),n.oxw().onPage(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("data",e.data)}}const L=[{path:"",children:[{path:"list-blogs",component:(()=>{class e{constructor(e,t,o,r){this.modalService=e,this.blogService=t,this.datePipe=o,this.messageService=r,this.params={},this.settings={mode:"external",actions:{position:"right"},columns:{imageUrl:{title:"Image",type:"custom",renderComponent:p.V,filter:!1},title:{title:"Title",type:"custom",renderComponent:c.M},shortDes:{title:"Short Description"},createByDate:{filter:!1,title:"Date Create",valuePrepareFunction:e=>this.datePipe.transform(new Date(e),"dd/MM/yyyy"),type:"custom",renderComponent:h.V}}}}getBlogs(){this.blogService.get({params:this.params}).then(e=>{e.hasError||(this.blogs=e.data.results,this.data=e.data)}).catch(e=>{var t,o;this.messageService.alert(null!==(o=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==o?o:"Server Disconnected",u.b.ERROR)})}openDetails(e){var t=this.modalService.open(J,{size:"lg"});t.componentInstance.item=null==e?void 0:e.data,t.result.then(()=>this.getBlogs(),e=>{})}delete(e){this.messageService.confirm("Do you want to delete the Blog?","Yes").then(t=>{t.isConfirmed&&this.blogService.delete(e.data).then(()=>{this.messageService.notification("Blog has been deleted",u.b.SUCCESS),this.getBlogs()})})}onPage(e){this.params.pageIndex=e,this.getBlogs()}ngOnInit(){this.params.pageIndex=0,this.getBlogs()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(l.FF),n.Y36(d),n.Y36(r.uU),n.Y36(Z.e))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-list-blogs"]],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body","vendor-table"],["id","batchDelete",1,"custom-datatable","media-datatable"],[1,"table-responsive"],[3,"settings","source","create","delete","edit"],[3,"data","page",4,"ngIf"],[3,"data","page"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h5"),n._uU(4,"Blog Details"),n.qZA(),n.qZA(),n.TgZ(5,"div",3),n.TgZ(6,"div",4),n.TgZ(7,"div",5),n.TgZ(8,"ng2-smart-table",6),n.NdJ("create",function(){return t.openDetails(null)})("delete",function(e){return t.delete(e)})("edit",function(e){return t.openDetails(e)}),n.qZA(),n.qZA(),n.qZA(),n.YNc(9,B,1,1,"app-paging-server-view",7),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(8),n.Q6J("settings",t.settings)("source",t.blogs),n.xp6(1),n.Q6J("ngIf",(null==t.data?null:t.data.totalPage)>1))},directives:[s.T5,r.O5,D.B],styles:[""]}),e})(),data:{title:"Blog List",breadcrumb:"Blog List"}}]}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[m.Bz.forChild(L)],m.Bz]}),e})(),R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[d,r.uU],imports:[[r.ez,i.UX,I,l.IJ,s.ne,g.m,T.d]]}),e})()}}]);