"use strict";(self.webpackChunkmultikart_backend=self.webpackChunkmultikart_backend||[]).push([[114],{41114:function(e,t,s){s.r(t),s.d(t,{UsersModule:function(){return C}});var i=s(38583),r=s(90665),a=s(15834),o=s(61861),l=s(70429),n=s(10494),m=s(98616),u=s(57870),d=s(18217),c=s(37716),h=s(8403);let p=(()=>{class e{constructor(e){this.httpClient=e,this.url="/api/user"}get(e){return this.httpClient.getObservable(this.url,e).toPromise()}create(e){return this.httpClient.postObservable(this.url,e).toPromise()}update(e){return this.httpClient.putObservable(this.url,e).toPromise()}delete(e){return this.httpClient.deleteObservable(`${this.url}/?id=${null==e?void 0:e.id}`).toPromise()}save(e){return e.id?this.update(e):this.create(e)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(h.Y))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();var g=s(5383),f=s(20985),v=s(71279),Z=s(75288),b=s(36711);function A(e,t){if(1&e&&(c.TgZ(0,"p",21),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij(" ",e.messageFail," ")}}function U(e,t){1&e&&(c.TgZ(0,"div",9),c.TgZ(1,"label",10),c.TgZ(2,"span"),c._uU(3,"*"),c.qZA(),c._uU(4," Password"),c.qZA(),c._UZ(5,"input",22),c.qZA())}function q(e,t){1&e&&(c.TgZ(0,"div",23),c.TgZ(1,"div"),c._uU(2,"Wrong email type"),c.qZA(),c.qZA())}const T=function(e){return{"is-invalid":e}};let F=(()=>{class e{constructor(e,t,s,i){this.formBuilder=e,this.userService=t,this.ngbActiveModal=s,this.messageService=i,this.modalFile=new g.mH,this.modalFile.typeFile=g.U9.IMAGE,this.modalFile.multiBoolen=!1,this.modalFile.enityType=g.py.USER}ngOnInit(){this.loadItem(),this.item&&(this.fileURL=[],this.fileURL.push(this.item.imageUrl))}loadItem(){this.usersForm=this.formBuilder.group({username:[this.item?this.item.username:"",[r.kI.required]],password:[this.item?this.item.password:"",[r.kI.required]],email:[this.item?this.item.email:"",[r.kI.email]],firstName:[this.item?this.item.firstName:""],lastName:[this.item?this.item.lastName:""],imageUrl:[this.item?this.item.imageUrl:""]}),this.modalHeader=new g.IQ,this.modalHeader.title=this.item?`Update ${this.item.username}`:"Add",this.modalFooter=new g.Jt,this.modalFooter.title="Save"}save(){this.messageFail="",!this.usersForm.invalid&&(this.user={username:this.usersForm.value.username,password:this.usersForm.value.password,email:this.usersForm.value.email,firstName:this.usersForm.value.firstName,lastName:this.usersForm.value.lastName,imageUrl:this.usersForm.value.imageUrl,id:this.item?this.item.id:"",files:this.modalFile.listFile},this.callServiceToSave())}callServiceToSave(){this.userService.save(this.user).then(e=>{this.messageService.notification(this.item?"Admin profile has been edited":"Admin profile has been created",m.b.SUCCESS),this.ngbActiveModal.close()}).catch(e=>{var t,s;this.messageService.alert(null!==(s=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==s?s:"Server Disconnected",m.b.ERROR),e.error.message&&(this.messageFail=e.error.message)})}close(e){this.ngbActiveModal.dismiss()}onChangeData(e){null!=e&&(this.fileURL||(this.fileURL=[]),e.add&&(this.fileURL=[...this.fileURL,...e.add]),e.remove&&this.fileURL.forEach((t,s)=>{t.includes(e.remove)&&this.fileURL.splice(s,1)}),e.removeAll&&(this.fileURL=[]),this.usersForm.controls.imageUrl.setValue(this.fileURL.join(",")))}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(r.qu),c.Y36(p),c.Y36(a.Kz),c.Y36(f.e))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-users-details"]],inputs:{item:"item"},features:[c._Bn([p])],decls:38,vars:11,consts:[[3,"data","onAction"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card","tab2-card"],[1,"card-body"],["id","account","role","tabpanel","aria-labelledby","account-tab",1,"tab-pane","fade","active","show"],["novalidate","",1,"needs-validation","user-add",3,"formGroup"],["class","text-danger",4,"ngIf"],[1,"form-group","row"],["for","validationCustom0",1,"col-xl-3","col-md-4"],["type","text","formControlName","username","autocomplete","new-password",1,"form-control","col-xl-8","col-md-7"],["class","form-group row",4,"ngIf"],["for","validationCustom2",1,"col-xl-3","col-md-4"],["type","text","formControlName","email",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["class","invalid-feedback col-md-5 offset-md-3",4,"ngIf"],["type","text","formControlName","firstName",1,"form-control","col-xl-8","col-md-7"],["type","text","formControlName","lastName",1,"form-control","col-xl-8","col-md-7"],["type","text","formControlName","email","hidden","",1,"form-control","col-xl-8","col-md-7"],[1,"col-xl-8","col-md-7","p-0"],["styleFile","width: 100%; height: auto;",3,"data","fileURL","onChange"],[1,"text-danger"],["type","password","formControlName","password","autocomplete","new-password",1,"form-control","col-xl-8","col-md-7"],[1,"invalid-feedback","col-md-5","offset-md-3"]],template:function(e,t){1&e&&(c.TgZ(0,"app-modal-header",0),c.NdJ("onAction",function(e){return t.close(e)}),c.qZA(),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c.TgZ(6,"div",6),c.TgZ(7,"form",7),c.TgZ(8,"h4"),c._uU(9,"Admin Details"),c.qZA(),c.YNc(10,A,2,1,"p",8),c.TgZ(11,"div",9),c.TgZ(12,"label",10),c.TgZ(13,"span"),c._uU(14,"*"),c.qZA(),c._uU(15," Username"),c.qZA(),c._UZ(16,"input",11),c.qZA(),c.YNc(17,U,6,0,"div",12),c.TgZ(18,"div",9),c.TgZ(19,"label",13),c._uU(20," Email"),c.qZA(),c._UZ(21,"input",14),c.YNc(22,q,3,0,"div",15),c.qZA(),c.TgZ(23,"div",9),c.TgZ(24,"label",13),c._uU(25," FirstName"),c.qZA(),c._UZ(26,"input",16),c.qZA(),c.TgZ(27,"div",9),c.TgZ(28,"label",13),c._uU(29," LastName"),c.qZA(),c._UZ(30,"input",17),c.qZA(),c.TgZ(31,"div",9),c.TgZ(32,"label",13),c._uU(33," Image"),c.qZA(),c._UZ(34,"input",18),c.TgZ(35,"div",19),c.TgZ(36,"app-upload-file",20),c.NdJ("onChange",function(e){return t.onChangeData(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(37,"app-modal-footer",0),c.NdJ("onAction",function(){return t.save()}),c.qZA()),2&e&&(c.Q6J("data",t.modalHeader),c.xp6(7),c.Q6J("formGroup",t.usersForm),c.xp6(3),c.Q6J("ngIf",t.messageFail),c.xp6(7),c.Q6J("ngIf",!t.item),c.xp6(4),c.Q6J("ngClass",c.VKq(9,T,t.usersForm.controls.email.dirty&&(null==t.usersForm.controls.email.errors?null:t.usersForm.controls.email.errors.email))),c.xp6(1),c.Q6J("ngIf",null==t.usersForm.controls.email.errors?null:t.usersForm.controls.email.errors.email),c.xp6(14),c.Q6J("data",t.modalFile)("fileURL",t.fileURL),c.xp6(1),c.Q6J("data",t.modalFooter))},directives:[v.R,r._Y,r.JL,r.sg,i.O5,r.Fj,r.JJ,r.u,i.mk,Z.R,b.Y],styles:[""]}),e})();var w=s(93291),S=s(46913);function N(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"app-paging-server-view",8),c.NdJ("page",function(t){return c.CHM(e),c.oxw().onPage(t)}),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("data",e.data)}}const y=[{path:"",children:[{path:"list-users",component:(()=>{class e{constructor(e,t,s,i){this.modalService=e,this.userService=t,this.messageService=s,this.authService=i,this.closeResult="",this.params={},this.settings={mode:"external",pager:{display:!0,perPage:10},actions:{position:"right"},columns:{imageUrl:{filter:!1,title:"Image",type:"custom",renderComponent:d.V},username:{title:"Username",type:"custom",renderComponent:u.M},email:{title:"Email"},firstName:{title:"First Name"},lastName:{title:"Last Name"}}},this.getList()}ngOnDestroy(){this.subUser.unsubscribe(),this.subUser=null}ngOnInit(){this.subUser=this.authService.callUserInfo.subscribe(e=>this.userInfo=e)}delete(e){"10000000-0000-0000-0000-000000000000"!=e.data.id&&e.data.id!=this.userInfo.id?this.messageService.confirm("Do you want to delete the user?","Yes").then(t=>{t.isConfirmed&&this.userService.delete(e.data).then(()=>{this.messageService.notification("User has been deleted",m.b.SUCCESS),this.getList()}).catch(e=>{var t,s;this.messageService.alert(null!==(s=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==s?s:"Server Disconnected",m.b.ERROR)})}):this.messageService.alert("Your access permissions may be inadequate to perform the requested operation on this resource.",m.b.INFO)}openPopup(e){if("10000000-0000-0000-0000-000000000000"==this.userInfo.id||"10000000-0000-0000-0000-000000000000"!=(null==e?void 0:e.data.id)){var t=this.modalService.open(F,{size:"lg"});e&&(t.componentInstance.item=e.data),t.result.then(e=>{this.getList()},e=>{})}else this.messageService.alert("Your access permissions may be inadequate to perform the requested operation on this resource.",m.b.INFO)}getList(){this.userService.get({params:this.params}).then(e=>{e.hasError||(this.users=e.data.results)}).catch(e=>{})}onPage(e){this.params.pageIndex=e,this.getList()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(a.FF),c.Y36(p),c.Y36(f.e),c.Y36(w.e8))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-list-users"]],features:[c._Bn([p])],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body","vendor-table"],[1,"custom-datatable","media-datatable"],[1,"table-responsive"],[3,"settings","source","edit","create","delete","sourceChange"],[3,"data","page",4,"ngIf"],[3,"data","page"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"h5"),c._uU(4,"Admin Details"),c.qZA(),c.qZA(),c.TgZ(5,"div",3),c.TgZ(6,"div",4),c.TgZ(7,"div",5),c.TgZ(8,"ng2-smart-table",6),c.NdJ("edit",function(e){return t.openPopup(e)})("create",function(){return t.openPopup(null)})("delete",function(e){return t.delete(e)})("sourceChange",function(e){return t.users=e}),c.qZA(),c.qZA(),c.qZA(),c.YNc(9,N,1,1,"app-paging-server-view",7),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("settings",t.settings)("source",t.users),c.xp6(1),c.Q6J("ngIf",(null==t.data?null:t.data.totalPage)>1))},directives:[o.T5,i.O5,S.B],styles:[""]}),e})(),data:{title:"Admin List",breadcrumb:"Admin List"}}]}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.Bz.forChild(y)],n.Bz]}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.ez,x,r.UX,a.IJ,l.m,a.bz,o.ne]]}),e})()},57870:function(e,t,s){s.d(t,{M:function(){return r}});var i=s(37716);let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-custom-view-cell-string"]],inputs:{value:"value",rowData:"rowData"},decls:2,vars:1,consts:[[1,"text-left"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.qZA()),2&e&&(i.xp6(1),i.Oqu(t.value))},styles:[""]}),e})()}}]);