"use strict";(self.webpackChunkmultikart_backend=self.webpackChunkmultikart_backend||[]).push([[630],{13630:function(e,t,r){r.r(t),r.d(t,{BannersModule:function(){return B}});var n=r(38583),i=r(90665),a=r(15834),o=r(61861),s=r(10494),l=r(98616),d=r(57870),c=r(59314),u=r(18217),m=r(5383),p=r(37716),g=r(41374),h=r(20985),v=r(71279),f=r(75288),b=r(36711);function Z(e,t){1&e&&(p.TgZ(0,"span",23),p._uU(1," Title is required "),p.qZA())}function q(e,t){1&e&&(p.TgZ(0,"span",23),p._uU(1," Image is required "),p.qZA())}function U(e,t){1&e&&(p.TgZ(0,"span",23),p._uU(1," Display Order is required "),p.qZA())}const A=function(e){return{"is-invalid ":e}};let C=(()=>{class e{constructor(e,t,r,n){this.formBuilder=e,this.ngbActiveModal=t,this.bannersService=r,this.messageService=n,this.submitted=!1,this.modalFile=new m.mH,this.modalFile.typeFile=m.U9.IMAGE,this.modalFile.multiBoolen=!1,this.modalFile.enityType=m.py.BANNER}ngOnInit(){this.loadFormItem(),this.createModal(),this.item&&(this.fileURL=[],this.item.imageUrl.split(",").forEach(e=>{this.fileURL.push(e)}))}loadFormItem(){this.bannersForm=this.formBuilder.group({title:[this.item?this.item.title:"",i.kI.required],description:[this.item?this.item.description:""],link:[this.item?this.item.link:""],imageUrl:[this.item?this.item.imageUrl:"",i.kI.required],displayOrder:[this.item?this.item.displayOrder:"",i.kI.required]})}createModal(){this.modalHeader=new m.IQ,this.modalHeader.title=null!=this.item?`Update ${this.item.title}`:"Add Banner",this.modalFooter=new m.Jt,this.modalFooter.title="Save"}get bannersFormControl(){return this.bannersForm.controls}saveBanner(e){this.banner={title:this.bannersForm.controls.title.value,description:this.bannersForm.controls.description.value,link:this.bannersForm.controls.link.value,imageUrl:this.bannersForm.controls.imageUrl.value,displayOrder:this.bannersForm.controls.displayOrder.value,id:this.item?this.item.id:"",files:this.modalFile.listFile},this.submitted=!0,this.bannersForm.valid&&this.bannersService.save(this.banner).then(e=>{this.messageService.notification(this.item?"Banner has been edited":"Banner has been created",l.b.SUCCESS),this.bannersForm.reset(),this.submitted=!1,this.ngbActiveModal.close()}).catch(e=>{var t,r;this.messageService.alert(null!==(r=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==r?r:"Server Disconnected",l.b.ERROR)})}close(e){this.ngbActiveModal.dismiss()}onChangeData(e){null!=e&&(this.fileURL||(this.fileURL=[]),e.add&&(this.fileURL=[...this.fileURL,...e.add]),e.remove&&this.fileURL.forEach((t,r)=>{t.includes(e.remove)&&this.fileURL.splice(r,1)}),e.removeAll&&(this.fileURL=[]),this.bannersForm.controls.imageUrl.setValue(this.fileURL.join(",")),console.log(this.fileURL))}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(i.qu),p.Y36(a.Kz),p.Y36(g.j),p.Y36(h.e))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-banners-detail"]],features:[p._Bn([])],decls:49,vars:18,consts:[[3,"data","onAction"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card","tab2-card"],[1,"card-body"],["id","account","role","tabpanel","aria-labelledby","account-tab",1,"tab-pane","fade","active","show"],["novalidate","",1,"needs-validation","user-add",3,"formGroup"],[1,"form-group","row"],["for","validationCustom0",1,"col-xl-3","col-md-4"],["id","validationCustom0","type","text","required","","formControlName","title",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"invalid-feedback","col-md-3","offset-md-3"],["class","text-danger",4,"ngIf"],["for","",1,"col-xl-3","col-md-4"],["id","","type","text","formControlName","description",1,"form-control","col-xl-8","col-md-7"],["id","validationCustom1","type","text","formControlName","link",1,"form-control","col-xl-8","col-md-7"],["for","validationCustom2",1,"col-xl-3","col-md-4"],["id","validationCustom2","type","text","formControlName","imageUrl","hidden","",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"col-xl-8","col-md-7","p-0"],["styleFile","width: 100%; height: auto;",3,"data","fileURL","isBannerUpload","onChange"],["for","validationCustom3",1,"col-xl-3","col-md-4"],["id","validationCustom3","type","number","required","","formControlName","displayOrder",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"invalid-feedback","col-md-5","offset-md-3"],[1,"text-danger"]],template:function(e,t){1&e&&(p.TgZ(0,"app-modal-header",0),p.NdJ("onAction",function(e){return t.close(e)}),p.qZA(),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"div",6),p.TgZ(7,"form",7),p.TgZ(8,"h4"),p._uU(9,"Banner Details"),p.qZA(),p.TgZ(10,"div",8),p.TgZ(11,"label",9),p.TgZ(12,"span"),p._uU(13,"*"),p.qZA(),p._uU(14," Title"),p.qZA(),p._UZ(15,"input",10),p.TgZ(16,"div",11),p.YNc(17,Z,2,0,"span",12),p.qZA(),p.qZA(),p.TgZ(18,"div",8),p.TgZ(19,"label",13),p.TgZ(20,"span"),p._uU(21,"\xa0"),p.qZA(),p._uU(22," Description"),p.qZA(),p._UZ(23,"input",14),p.qZA(),p.TgZ(24,"div",8),p.TgZ(25,"label",13),p.TgZ(26,"span"),p._uU(27,"\xa0"),p.qZA(),p._uU(28," Link"),p.qZA(),p._UZ(29,"input",15),p.qZA(),p.TgZ(30,"div",8),p.TgZ(31,"label",16),p.TgZ(32,"span"),p._uU(33,"*"),p.qZA(),p._uU(34," Image"),p.qZA(),p._UZ(35,"input",17),p.TgZ(36,"div",18),p.TgZ(37,"app-upload-file",19),p.NdJ("onChange",function(e){return t.onChangeData(e)}),p.qZA(),p.qZA(),p.TgZ(38,"div",11),p.YNc(39,q,2,0,"span",12),p.qZA(),p.qZA(),p.TgZ(40,"div",8),p.TgZ(41,"label",20),p.TgZ(42,"span"),p._uU(43,"*"),p.qZA(),p._uU(44," Display Order"),p.qZA(),p._UZ(45,"input",21),p.TgZ(46,"div",22),p.YNc(47,U,2,0,"span",12),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(48,"app-modal-footer",0),p.NdJ("onAction",function(e){return t.saveBanner(e)}),p.qZA()),2&e&&(p.Q6J("data",t.modalHeader),p.xp6(7),p.Q6J("formGroup",t.bannersForm),p.xp6(8),p.Q6J("ngClass",p.VKq(12,A,(t.bannersFormControl.title.touched||t.submitted)&&(null==t.bannersFormControl.title.errors?null:t.bannersFormControl.title.errors.required))),p.xp6(2),p.Q6J("ngIf",(t.bannersFormControl.title.touched||t.submitted)&&(null==t.bannersFormControl.title.errors?null:t.bannersFormControl.title.errors.required)),p.xp6(18),p.Q6J("ngClass",p.VKq(14,A,(t.bannersFormControl.imageUrl.touched||t.submitted)&&(null==t.bannersFormControl.imageUrl.errors?null:t.bannersFormControl.imageUrl.errors.required))),p.xp6(2),p.Q6J("data",t.modalFile)("fileURL",t.fileURL)("isBannerUpload",!0),p.xp6(2),p.Q6J("ngIf",(t.bannersFormControl.imageUrl.touched||t.submitted)&&(null==t.bannersFormControl.imageUrl.errors?null:t.bannersFormControl.imageUrl.errors.required)),p.xp6(6),p.Q6J("ngClass",p.VKq(16,A,(t.bannersFormControl.displayOrder.touched||t.submitted)&&(null==t.bannersFormControl.displayOrder.errors?null:t.bannersFormControl.displayOrder.errors.required))),p.xp6(2),p.Q6J("ngIf",(t.bannersFormControl.displayOrder.touched||t.submitted)&&(null==t.bannersFormControl.displayOrder.errors?null:t.bannersFormControl.displayOrder.errors.required)),p.xp6(1),p.Q6J("data",t.modalFooter))},directives:[v.R,i._Y,i.JL,i.sg,i.Fj,i.Q7,i.JJ,i.u,n.mk,n.O5,f.R,i.wV,b.Y],styles:[""]}),e})();var F=r(46913);function T(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"app-paging-server-view",8),p.NdJ("page",function(t){return p.CHM(e),p.oxw().onPage(t)}),p.qZA()}if(2&e){const e=p.oxw();p.Q6J("data",e.data)}}const y=[{path:"",children:[{path:"list-banners",component:(()=>{class e{constructor(e,t,r){this.modalService=e,this.bannersService=t,this.messageService=r,this.params={},this.settings={mode:"external",actions:{position:"right"},columns:{imageUrl:{filter:!1,title:"Image",type:"custom",renderComponent:u.V},title:{title:"Title",type:"custom",renderComponent:d.M},description:{title:"Description"},link:{title:"Link",type:"html",valuePrepareFunction:e=>`<a href='${e}' target="_blank">${e}</a>`},displayOrder:{title:"Display Order",value:"displayOrder",type:"custom",renderComponent:c.V}}},this.getBanners()}ngOnInit(){}getBanners(){this.bannersService.get({params:this.params}).then(e=>{e.hasError||(this.banners=e.data.results,this.data=e.data)}).catch(e=>{var t,r;this.messageService.alert(null!==(r=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==r?r:"Server Disconnected",l.b.ERROR)})}openDetails(e){var t=this.modalService.open(C,{size:"lg"});t.componentInstance.item=null==e?void 0:e.data,t.result.then(e=>this.getBanners(),e=>{})}delete(e){this.messageService.confirm("Do you want to delete the banner?","Yes").then(t=>{t.isConfirmed&&this.bannersService.delete(e.data).then(()=>{this.messageService.notification("Banner has been deleted",l.b.SUCCESS),this.getBanners()}).catch(e=>{var t,r;this.messageService.alert(null!==(r=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==r?r:"Server Disconnected",l.b.ERROR)})})}onPage(e){this.params.pageIndex=e,this.getBanners()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(a.FF),p.Y36(g.j),p.Y36(h.e))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-list-banners"]],features:[p._Bn([])],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body","vendor-table"],["id","batchDelete",1,"custom-datatable","media-datatable"],[1,"table-responsive"],[3,"settings","source","sourceChange","create","delete","edit"],[3,"data","page",4,"ngIf"],[3,"data","page"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"h5"),p._uU(4,"Banner Details"),p.qZA(),p.qZA(),p.TgZ(5,"div",3),p.TgZ(6,"div",4),p.TgZ(7,"div",5),p.TgZ(8,"ng2-smart-table",6),p.NdJ("sourceChange",function(e){return t.banners=e})("create",function(e){return t.openDetails(e)})("delete",function(e){return t.delete(e)})("edit",function(e){return t.openDetails(e)}),p.qZA(),p.qZA(),p.qZA(),p.YNc(9,T,1,1,"app-paging-server-view",7),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(8),p.Q6J("settings",t.settings)("source",t.banners),p.xp6(1),p.Q6J("ngIf",(null==t.data?null:t.data.totalPage)>1))},directives:[o.T5,n.O5,F.B],styles:[""]}),e})(),data:{title:"Banner List",breadcrumb:"Banner List"}}]}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[s.Bz.forChild(y)],s.Bz]}),e})();var S=r(70429),O=r(93291);let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({providers:[O.jS],imports:[[n.ez,i.UX,a.IJ,o.ne,x,S.m]]}),e})()},57870:function(e,t,r){r.d(t,{M:function(){return i}});var n=r(37716);let i=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-custom-view-cell-string"]],inputs:{value:"value",rowData:"rowData"},decls:2,vars:1,consts:[[1,"text-left"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1),n.qZA()),2&e&&(n.xp6(1),n.Oqu(t.value))},styles:[""]}),e})()},59314:function(e,t,r){r.d(t,{V:function(){return i}});var n=r(37716);let i=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-customViewCell"]],inputs:{value:"value",rowData:"rowData"},decls:2,vars:1,consts:[[1,"text-right"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1),n.qZA()),2&e&&(n.xp6(1),n.Oqu(t.value))},styles:[""]}),e})()}}]);